namespace = es_collapse

country_event = {
	id = es_collapse.23
	title = es_collapse.23.t
	desc = es_collapse.23.d
	picture = ES_PROVINCE_COLLAPSE_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = es_collapse.2.a
		ai_chance = { factor = 75 }
		hidden_effect = {
		
		if = {
		limit = {
		NOT = { capital_scope = { region = hammerfell_lr } }
		}
		every_core_province = {
			limit = {
				region = hammerfell_lr
			}
			remove_core = ROOT
		}
		}
		
		if = {
		limit = {
		hammerfell_1_la = {
		owned_by = ROOT
		}
		NOT = { exists = HA1 }
		NOT = { exists = HE1 }
		NOT = { capital_scope = { area = hammerfell_1_la } }
		}
		if = {
		limit = {
		NOT = { has_global_flag = redguard_migration_flag }
		}
		every_owned_province = {
		limit = {
		area = hammerfell_1_la
		}
		add_core = HA1
		}
		create_vassal = HA1
		}
		else = {
		every_owned_province = {
		limit = {
		area = hammerfell_1_la
		}
		add_core = HE1
		}
		create_vassal = HE1
		}
		}
		
		if = {
		limit = {
		hammerfell_2_la = {
		owned_by = ROOT
		}
		NOT = { exists = HA2 }
		NOT = { exists = HE2 }
		NOT = { capital_scope = { area = hammerfell_2_la } }
		}
		if = {
		limit = {
		NOT = { has_global_flag = redguard_migration_flag }
		}
		every_owned_province = {
		limit = {
		area = hammerfell_2_la
		}
		add_core = HA2
		}
		create_vassal = HA2
		}
		else = {
		every_owned_province = {
		limit = {
		area = hammerfell_2_la
		}
		add_core = HE2
		}
		create_vassal = HE2
		}
		}
		
		if = {
		limit = {
		hammerfell_3_la = {
		owned_by = ROOT
		}
		NOT = { exists = HA3 }
		NOT = { exists = HE3 }
		NOT = { capital_scope = { area = hammerfell_3_la } }
		}
		if = {
		limit = {
		NOT = { has_global_flag = redguard_migration_flag }
		}
		every_owned_province = {
		limit = {
		area = hammerfell_3_la
		}
		add_core = HA3
		}
		create_vassal = HA3
		}
		else = {
		every_owned_province = {
		limit = {
		area = hammerfell_3_la
		}
		add_core = HE3
		}
		create_vassal = HE3
		}
		}
		
		if = {
		limit = {
		hammerfell_4_la = {
		owned_by = ROOT
		}
		NOT = { exists = HA4 }
		NOT = { exists = HE4 }
		NOT = { capital_scope = { area = hammerfell_4_la } }
		}
		if = {
		limit = {
		NOT = { has_global_flag = redguard_migration_flag }
		}
		every_owned_province = {
		limit = {
		area = hammerfell_4_la
		}
		add_core = HA4
		}
		create_vassal = HA4
		}
		else = {
		every_owned_province = {
		limit = {
		area = hammerfell_4_la
		}
		add_core = HE4
		}
		create_vassal = HE4
		}
		}
		
		if = {
		limit = {
		hammerfell_5_la = {
		owned_by = ROOT
		}
		NOT = { exists = HA5 }
		NOT = { exists = HE5 }
		NOT = { capital_scope = { area = hammerfell_5_la } }
		}
		if = {
		limit = {
		NOT = { has_global_flag = redguard_migration_flag }
		}
		every_owned_province = {
		limit = {
		area = hammerfell_5_la
		}
		add_core = HA5
		}
		create_vassal = HA5
		}
		else = {
		every_owned_province = {
		limit = {
		area = hammerfell_5_la
		}
		add_core = HE5
		}
		create_vassal = HE5
		}
		}
		
		if = {
		limit = {
		hammerfell_6_la = {
		owned_by = ROOT
		}
		NOT = { exists = HA6 }
		NOT = { exists = HE6 }
		NOT = { capital_scope = { area = hammerfell_6_la } }
		}
		if = {
		limit = {
		NOT = { has_global_flag = redguard_migration_flag }
		}
		every_owned_province = {
		limit = {
		area = hammerfell_6_la
		}
		add_core = HA6
		}
		create_vassal = HA6
		}
		else = {
		every_owned_province = {
		limit = {
		area = hammerfell_6_la
		}
		add_core = HE6
		}
		create_vassal = HE6
		}
		}
		
		if = {
		limit = {
		hammerfell_7_la = {
		owned_by = ROOT
		}
		NOT = { exists = HA7 }
		NOT = { exists = HE7 }
		NOT = { capital_scope = { area = hammerfell_7_la } }
		}
		if = {
		limit = {
		NOT = { has_global_flag = redguard_migration_flag }
		}
		every_owned_province = {
		limit = {
		area = hammerfell_7_la
		}
		add_core = HA7
		}
		create_vassal = HA7
		}
		else = {
		every_owned_province = {
		limit = {
		area = hammerfell_7_la
		}
		add_core = HE7
		}
		create_vassal = HE7
		}
		}
		
		if = {
		limit = {
		hammerfell_8_la = {
		owned_by = ROOT
		}
		NOT = { exists = HA8 }
		NOT = { exists = HE8 }
		NOT = { capital_scope = { area = hammerfell_8_la } }
		}
		if = {
		limit = {
		NOT = { has_global_flag = redguard_migration_flag }
		}
		every_owned_province = {
		limit = {
		area = hammerfell_8_la
		}
		add_core = HA8
		}
		create_vassal = HA8
		}
		else = {
		every_owned_province = {
		limit = {
		area = hammerfell_8_la
		}
		add_core = HE8
		}
		create_vassal = HE8
		}
		}
		
		if = {
		limit = {
		hammerfell_9_la = {
		owned_by = ROOT
		}
		NOT = { exists = HA9 }
		NOT = { exists = HE9 }
		NOT = { capital_scope = { area = hammerfell_9_la } }
		}
		if = {
		limit = {
		NOT = { has_global_flag = redguard_migration_flag }
		}
		every_owned_province = {
		limit = {
		area = hammerfell_9_la
		}
		add_core = HA9
		}
		create_vassal = HA9
		}
		else = {
		every_owned_province = {
		limit = {
		area = hammerfell_9_la
		}
		add_core = HE9
		}
		create_vassal = HE9
		}
		}
		
		if = {
		limit = {
		hammerfell_10_la = {
		owned_by = ROOT
		}
		NOT = { exists = HB0 }
		NOT = { exists = HF0 }
		NOT = { capital_scope = { area = hammerfell_10_la } }
		}
		if = {
		limit = {
		NOT = { has_global_flag = redguard_migration_flag }
		}
		every_owned_province = {
		limit = {
		area = hammerfell_10_la
		}
		add_core = HF0
		}
		create_vassal = HF0
		}
		else = {
		every_owned_province = {
		limit = {
		area = hammerfell_10_la
		}
		add_core = HF0
		}
		create_vassal = HF0
		}
		}
		
		if = {
		limit = {
		hammerfell_11_la = {
		owned_by = ROOT
		}
		NOT = { exists = HB1 }
		NOT = { exists = HF1 }
		NOT = { capital_scope = { area = hammerfell_11_la } }
		}
		if = {
		limit = {
		NOT = { has_global_flag = redguard_migration_flag }
		}
		every_owned_province = {
		limit = {
		area = hammerfell_11_la
		}
		add_core = HF1
		}
		create_vassal = HF1
		}
		else = {
		every_owned_province = {
		limit = {
		area = hammerfell_11_la
		}
		add_core = HF1
		}
		create_vassal = HF1
		}
		}
		
		if = {
		limit = {
		hammerfell_12_la = {
		owned_by = ROOT
		}
		NOT = { exists = HB2 }
		NOT = { exists = HF2 }
		NOT = { capital_scope = { area = hammerfell_12_la } }
		}
		if = {
		limit = {
		NOT = { has_global_flag = redguard_migration_flag }
		}
		every_owned_province = {
		limit = {
		area = hammerfell_12_la
		}
		add_core = HF2
		}
		create_vassal = HF2
		}
		else = {
		every_owned_province = {
		limit = {
		area = hammerfell_12_la
		}
		add_core = HF2
		}
		create_vassal = HF2
		}
		}
		
		if = {
		limit = {
		hammerfell_13_la = {
		owned_by = ROOT
		}
		NOT = { exists = HB3 }
		NOT = { exists = HF3 }
		NOT = { capital_scope = { area = hammerfell_13_la } }
		}
		if = {
		limit = {
		NOT = { has_global_flag = redguard_migration_flag }
		}
		every_owned_province = {
		limit = {
		area = hammerfell_13_la
		}
		add_core = HF3
		}
		create_vassal = HF3
		}
		else = {
		every_owned_province = {
		limit = {
		area = hammerfell_13_la
		}
		add_core = HF3
		}
		create_vassal = HF3
		}
		}
		
		if = {
		limit = {
		hammerfell_14_la = {
		owned_by = ROOT
		}
		NOT = { exists = HB4 }
		NOT = { exists = HF4 }
		NOT = { capital_scope = { area = hammerfell_14_la } }
		}
		if = {
		limit = {
		NOT = { has_global_flag = redguard_migration_flag }
		}
		every_owned_province = {
		limit = {
		area = hammerfell_14_la
		}
		add_core = HF4
		}
		create_vassal = HF4
		}
		else = {
		every_owned_province = {
		limit = {
		area = hammerfell_14_la
		}
		add_core = HF4
		}
		create_vassal = HF4
		}
		}
		
	    }
	}
	
	option = {
		name = es_collapse.2.b
		ai_chance = { factor = 15 }
		
		if = {
		limit = {
		NOT = { capital_scope = { region = hammerfell_lr } }
		}
		every_core_province = {
			limit = {
				region = hammerfell_lr
			}
			remove_core = ROOT
		}
		}
		
	}
	
	option = {
		name = es_collapse.2.c
		ai_chance = { factor = 10 }
		
		trigger = {
		NOT = { capital_scope = { region = hammerfell_lr } }
		NOT = { exists = HAM }
		}
		
		every_core_province = {
			limit = {
				region = hammerfell_lr
			}
			remove_core = ROOT
		}
		
		every_owned_province = {
		limit = {
		region = hammerfell_lr
		}
		add_core = HAM
		}
		
		release = HAM
		
		if = {
		limit = {
		government = monarchy
		}
		create_union = HAM
	    }
		else = {
		create_alliance = HAM
		}
	}
}